/*! frontend-nanodegree-arcade-game 11-07-2016 */
!function(a){"use strict";var b="images/char-boy.png",c="images/enemy-bug.png",d=100,e=202.5,f=383,g=60,h=60,i=0,j=function(a,b,d){this.height=h,this.sprite=c,this.speed=a,this.width=g,this.x=b,this.y=d},k=function(){i+=1,m.length=0;for(var a=0;a<=i;a++){var b=new j(256*Math.random(),0,184*Math.random()+50);m.push(b)}},l=function(a,c,d,e){this.height=h,this.speed=c,this.sprite=b,this.width=g,this.x=d,this.y=e};j.prototype.update=function(a){this.x=this.x+this.speed*a,this.x>=505&&(this.x=-100)},j.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)},l.prototype.handleInput=function(a){switch(a){case"left":n.x=n.x-n.speed;break;case"up":n.y=n.y-n.speed+15;break;case"right":n.x=n.x+n.speed;break;case"down":n.y=n.y+n.speed-15}},l.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)},l.prototype.reset=function(){this.x=e,this.y=f},l.prototype.update=function(){this.y>383&&(this.y=383),this.x>400&&(this.x=400),this.x<2&&(this.x=2)};var m=[],n=new l(b,d,e,f),o=new j(256*Math.random(),0,184*Math.random()+50);m.push(o),a.allEnemies=m,a.increaseEnemies=k,a.player=n,document.addEventListener("keyup",function(a){var b={37:"left",38:"up",39:"right",40:"down"};n.handleInput(b[a.keyCode])})}(window),function(){function a(a){a instanceof Array?a.forEach(function(a){b(a)}):b(a)}function b(a){if(f[a])return f[a];var b=new Image;b.onload=function(){f[a]=b,d()&&g.forEach(function(a){a()})},f[a]=!1,b.src=a}function c(a){return f[a]}function d(){var a=!0;for(var b in f)f.hasOwnProperty(b)&&!f[b]&&(a=!1);return a}function e(a){g.push(a)}var f={},g=[];window.Resources={load:a,get:c,onReady:e,isReady:d}}();var Engine=function(a){function b(){var a=Date.now(),c=(a-k)/1e3;e(c),h(),k=a,m.requestAnimationFrame(b)}function c(){j(),k=Date.now(),b()}function d(){allEnemies.forEach(function(a){player.x+10<a.x+a.width&&player.x+player.width>a.x+10&&player.y<a.y+a.height&&player.height+player.y>a.y&&j()})}function e(a){f(a),d(),g()}function f(a){allEnemies.forEach(function(b){b.update(a)}),player.update()}function g(){var a=20;player.y<a&&(increaseEnemies(),j())}function h(){var a,b,c=["images/water-block.png","images/stone-block.png","images/stone-block.png","images/stone-block.png","images/grass-block.png","images/grass-block.png"],d=6,e=5;for(a=0;a<d;a++)for(b=0;b<e;b++)o.drawImage(Resources.get(c[a]),101*b,83*a);i()}function i(){allEnemies.forEach(function(a){a.render()}),player.render()}function j(){player.reset()}var k,l=a.document,m=a.window,n=l.createElement("canvas"),o=n.getContext("2d");n.width=505,n.height=606,l.body.appendChild(n),Resources.load(["images/stone-block.png","images/water-block.png","images/grass-block.png","images/enemy-bug.png","images/char-boy.png"]),Resources.onReady(c),a.ctx=o}(this);